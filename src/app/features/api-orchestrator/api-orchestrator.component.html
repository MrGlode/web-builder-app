<!-- src/app/features/api-orchestrator/api-orchestrator.component.html -->

<div class="orchestrator-container">
  <!-- Header -->
  <header class="orchestrator-header">
    <div class="header-left">
      <h1>{{ orchestrationName }}</h1>
      <input
        type="text"
        class="orchestrator-title-input"
        [(ngModel)]="orchestrationName"
        placeholder="Nom de l'orchestration"
      />
    </div>
    <div class="header-actions">
      <button class="btn btn-secondary" (click)="onValidate()">
        ✓ Valider
      </button>
      <button class="btn btn-primary" (click)="onExecute()">
        ▶ Exécuter
      </button>
    </div>
  </header>

  <!-- Validation Messages -->
  <div class="validation-messages" *ngIf="validationMessages.length > 0">
    <div
      *ngFor="let msg of validationMessages"
      [class]="'validation-message validation-' + msg.type"
    >
      <span>{{ msg.message }}</span>
    </div>
  </div>

  <!-- Main Layout -->
  <div class="orchestrator-layout">
    <!-- Left: Block Palette -->
    <app-block-palette
      (blockSelected)="onBlockSelected($event)"
    ></app-block-palette>

    <!-- Center: Designer Canvas -->
    <app-designer-canvas
      (blockDropped)="onBlockDropped($event)"
      (blockMoved)="onBlockMoved($event)"
      (connectionCreated)="onConnectionCreated($event)"
      (connectionRemoved)="onConnectionRemoved($event)"
      (blockSelected)="onCanvasBlockSelected($event)"
    ></app-designer-canvas>

    <!-- Right: Config Panel -->
    <app-config-panel
      (configUpdated)="onConfigUpdated($event)"
    ></app-config-panel>
  </div>

  <!-- Execution Status -->
  <footer class="orchestrator-footer" *ngIf="isExecuting">
    <div class="execution-status">
      <span class="spinner"></span>
      <span>Exécution en cours...</span>
    </div>
  </footer>
</div>